language: node_js
node_js: 10.13.0
cache: npm
git:
  depth: 5
addons:
  ssh_known_hosts: jtmorrisbytes.com
before_deploy:
- mkdir ./temp -p
before_install:
- npm i -g @angular/cli
jobs:
  include:
    stage: build
    script:
    - ng test --no-watch --browsers=ChromeHeadless
    - npm run build
deploy:
  provider: heroku
  skip_cleanup: true
  api_key:
    secure: WMV48SKRGEBuhoTSMsOMl6JvJvfpgtaJyeYUVCxQRZ05wpjH2D21Qk5ha77EDYimS8kiH4gD84xcIM6hNv9Pt+w+yo3dVE+ry7Zpvd8isANMXSrJOhzSZyULB2GOfzgJ4uJY2qTslUOxEi7SHvLwJgReMyT3mamERSvOr6dC/ld3CX7R9Ixq5V9VPnVFCE1Sy2CWXEEi6KUorLQFNHPh2OB0jGinKZ4gUd28zPFPn/DQnCra+Tb8dUZ5cGP824SmX9ktUzNUX6J4IFVjpO7YFNCUcfITjAgSvqPFVPv2kGbz73NpPrIEcstj0AvYw+BtSWYfbHQ3AR7u4hF7rgDL9kea5g9EH170OFJ+iIfEDhvMDSZXOpk6IyQxbOx4HZ/JVP8Ix+lFJkVXLyuDA4TpuYhgpm4MeFG4o2V8WOVmx7nNSwAPrUWPOvAZ/tqWa9TzPLYzgixEpvwcWpHPo1Rvn7uqCuKSV8N3+nThXaHlbZvXAtA6bgd50fcXctqwnfC+pGoWxS/pl983qEf11PaJl1kBBJtqlUKBUJBfDTLueOF6Z41n3mQ6Y758q+AMHRHMALEcaO8eYpOIqG2tO5srWZxru2aIT8BFkd9dQRwYHN2M+0JEtmsAE5u+FtUHHD5zn1kJCPb1i4ZtaHiIFIVhPYz/pARZeatydQoxxN4m1rs=
  app:
    master: jtmorrisbytes
    staging: jtmorrisbytes-staging
    alpha: jtmorrisbytes-alpha
  on:
    all_branches: true
